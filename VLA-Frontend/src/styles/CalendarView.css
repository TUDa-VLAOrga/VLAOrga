:root {
  --z-base: 1;
  --z-dropdown: 100;
  --z-sticky: 200;
  --z-overlay: 1000;
  --z-modal: 1100;
  --z-tooltip: 1200;

  /* Timeline sizing */
  --cv-hour-height: 56px;
  --cv-all-day-height: 56px;

  /* Will be set inline from CalendarView.tsx */
  --cv-day-count: 5;
  /* Will be set inline from WeekGrid.tsx */
  --cv-hour-count: 15;

  --timelineRowBorderBottom: 1px dashed rgba(0, 0, 0, 0.4);
}

/* ✅ IMPORTANT: avoid box model mismatches (line alignment bugs) */
*,
*::before,
*::after {
  box-sizing: border-box;
}

.cv-root {
  width: 100%;
  margin: 0 auto;
  padding: 50px 24px 24px 24px;
  height: 100vh;
  display: flex;
  flex-direction: column;
  gap: 12px;
  overflow: hidden;
}

.cv-title {
  margin: 0 0 16px 0;
  font-size: 22px;
  font-weight: 700;
  text-align: center;
}

.cv-toolbar {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
  flex-wrap: wrap;
}

.cv-weekRow {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  width: 100%;
}

/* Frame: Header + Grid in one scrollable horizontal container */
.cv-frame {
  flex: 1;
  min-width: 0;
  min-height: 0;
  display: flex;
  flex-direction: column;

  /* wrapper only (no border here) */
  border: none;
  background: transparent;

  overflow-x: auto;
  overflow-y: hidden;
}

/* Header: 80px time column + N day columns */
.cv-header {
  display: grid;
  grid-template-columns: 80px repeat(var(--cv-day-count), minmax(220px, 1fr));
  background: #bfbfbf;

  min-width: max-content;

  /* table border */
  border-top: 1px solid #777;
  border-left: 1px solid #777;
  border-right: 1px solid #777;
  border-bottom: 1px solid #777;
}

.cv-headerCell {
  padding: 10px;
  text-align: center;
  border-right: 1px solid #777;
  background: transparent;
}

.cv-headerCell:last-child {
  border-right: none;
}

.cv-headerDay {
  font-weight: 700;
}

.cv-headerDate {
  margin-top: 2px;
  font-size: 12px;
}

/* Main grid area with shared vertical scrolling */
.cv-gridWithTime {
  display: grid;
  grid-template-columns: 80px 1fr;
  grid-template-rows: 1fr;

  min-height: 0;
  flex: 1 1 0;
  background: #d9d9d9;

  overflow-y: auto;
  overflow-x: visible;

  min-width: max-content;

  /* table border (bottom edge must be here!) */
  border-left: 1px solid #777;
  border-right: 1px solid #777;
  border-bottom: 1px solid #777;
}

/* Left rail = all-day spacer (optional) + time column */
.cv-leftRail {
  display: flex;
  flex-direction: column;
  border-right: 1px solid #777;
  background: #e9ecef;

  /* ✅ make rail fill the scrollable height */
  height: 100%;
}

.cv-allDaySpacer {
  height: var(--cv-all-day-height);
  border-bottom: 1px solid #777;
  background: #e9ecef;
}

/* Day columns grid */
.cv-grid {
  display: grid;
  grid-template-columns: repeat(var(--cv-day-count), minmax(220px, 1fr));
  min-height: 0;
  flex: 1;
  background: #d9d9d9;

  min-width: max-content;

  /* ✅ make grid fill the scrollable height */
  height: 100%;

  /* ✅ make day columns stretch full height */
  align-items: stretch;

  overflow: hidden;

  /* ✅ needed for separator overlay */
  position: relative;
}

/* ✅ Full-height day separators (do not depend on column height) */
.cv-grid::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 20;

  background-image: repeating-linear-gradient(
    to right,
    transparent 0,
    transparent calc(100% / var(--cv-day-count) - 1px),
    #777 calc(100% / var(--cv-day-count) - 1px),
    #777 calc(100% / var(--cv-day-count))
  );
}

/* Time column */
.cv-timeColumn {
  width: 80px;
  background: #e9ecef;
  display: flex;
  flex-direction: column;
  position: relative; /* needed for bottom boundary label */
  border-right: 1px solid #777;
}

/* Bottom boundary label (22:00) without adding a new hour row */
.cv-timeBoundary {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 0;

  /* ✅ keep label inside the table instead of pushing it below */
  transform: translateY(-50%);

  display: flex;
  justify-content: center;
  pointer-events: none;
}

/* ✅ FIX: line alignment. remove padding that offsets dashed line */
.cv-timeCell {
  height: var(--cv-hour-height);
  display: flex;
  align-items: center;
  justify-content: center;

  /* draw the hour separator exactly at the top */
  padding: 0;
  margin: 0;
  border-bottom: var(--timelineRowBorderBottom)
}

.cv-timeLabel {
  font-size: 12px;
  color: #333;
  line-height: 1;
}

.cv-grid > .cv-dayColumn:last-child {
  border-right: none;
}

/* keep the column line perfectly straight even when events overlap */
.cv-dayColumn {
  border-right: 1px solid #777;
  position: relative;
  overflow: hidden;

  height: 100%;
  display: flex;
  flex-direction: column;
}


/* All-day / untimed row */
.cv-allDayRow {
  height: var(--cv-all-day-height);
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-bottom: 1px solid #777;
  background: rgba(255, 255, 255, 0.15);
  overflow: hidden;
}

.cv-allDayEmpty {
  flex: 1;
}

.cv-allDayPill {
  max-width: 100%;
  padding: 8px 10px;
  border-radius: 8px;
  border-left: 4px solid;
  background: #f9f9f9;
  cursor: pointer;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Timeline */
.cv-dayTimeline {
  padding: 0 10px;
  flex: 1;
  min-height: 0;
}

.cv-timeline {
  position: relative;

  height: calc(var(--cv-hour-count) * var(--cv-hour-height));
  min-height: calc(var(--cv-hour-count) * var(--cv-hour-height));
}

/* ✅ Avoid pixel rounding mismatches */
.cv-timeline-grid {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
}

.cv-timeline-hour {
  height: var(--cv-hour-height);
  position: relative;
  border-bottom: var(--timelineRowBorderBottom)
}

.cv-timeline-hour-label {
  position: absolute;
  left: 6px;
  top: 2px;
  font-size: 11px;
  color: #444;
}

/* Timeline labels inside day column are hidden (we have left time column) */
.cv-dayColumn .cv-timeline-hour-label {
  display: none;
}

.cv-timeline-hour-line {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
}

.cv-timeline-events {
  position: absolute;
  inset: 0 6px 0 6px;
}

.cv-timeline-event {
  position: absolute;
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 10px;
  padding: 10px 12px;
  background: #ffffff;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
  overflow: hidden;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

/* ✅ Title + time under it (as you want) */
.cv-timeline-event-title {
  font-size: 20px;
  font-weight: 700;
  color: #111;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.cv-timeline-event-time {
  margin-top: 6px;
  font-size: 16px;
  font-weight: 500;
  color: rgba(0, 0, 0, 0.8);
  text-align: center;
  line-height: 1.1;
}

/* ===== Toolbar / Navigation ===== */

.cv-navBox {
  width: 44px;
  height: 44px;
  border: 1px solid #dee2e6;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  transition: all 0.15s ease;
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.cv-navBox:hover {
  background: #f8f9fa;
  border-color: #adb5bd;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
  transform: translateY(-1px);
}

.cv-navBox:first-child::after {
  content: "";
  width: 10px;
  height: 10px;
  border-left: 2px solid #495057;
  border-bottom: 2px solid #495057;
  transform: rotate(45deg);
  transition: border-color 0.15s ease;
}

.cv-navBox:nth-child(3)::after {
  content: "";
  width: 10px;
  height: 10px;
  border-right: 2px solid #495057;
  border-top: 2px solid #495057;
  transform: rotate(45deg);
  transition: border-color 0.15s ease;
}

.cv-navBox:hover::after {
  border-color: #212529;
}

.cv-navBox:active {
  transform: translateY(0);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  background: #e9ecef;
}

.cv-navIcon {
  display: none;
}

.cv-range {
  height: 44px;
  padding: 0px 16px;
  border: 1px solid #dee2e6;
  border-radius: 6px;
  background: white;
  font-size: 14px;
  font-weight: 500;
  color: #495057;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  display: flex;
  align-items: center;
}

.cv-quickNav {
  display: flex;
  gap: 8px;
}

.cv-quickNavBtn {
  height: 44px;
  padding: 8px 16px;
  border: 1px solid #dee2e6;
  border-radius: 6px;
  background: white;
  font-size: 14px;
  font-weight: 500;
  color: #495057;
  cursor: pointer;
  transition: all 0.15s ease;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.cv-quickNavBtn:hover {
  background: #e9ecef;
  border-color: #adb5bd;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
  transform: translateY(-1px);
}

.cv-quickNavBtn:active {
  transform: translateY(0);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  background: #e9ecef;
}

/* Date Picker */
.cv-datePickerOverlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-overlay);
  animation: fadeIn 0.2s;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.cv-datePickerBox {
  background: white;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  min-width: 300px;
  animation: slideIn 0.2s;
}

@keyframes slideIn {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.cv-datePickerTitle {
  margin: 0 0 16px 0;
  font-size: 18px;
  font-weight: 600;
  color: #212529;
}

.cv-datePickerInput {
  width: 100%;
  padding: 10px;
  border: 2px solid #dee2e6;
  border-radius: 6px;
  font-size: 15px;
  margin-bottom: 16px;
  box-sizing: border-box;
}

.cv-datePickerInput:focus {
  outline: none;
  border-color: #0d6efd;
}

.cv-datePickerActions {
  display: flex;
  gap: 8px;
  margin-top: 16px;
}

.cv-datePickerBtn {
  flex: 1;
  padding: 10px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.cv-datePickerCancel {
  background: #e9ecef;
  color: #495057;
}

.cv-datePickerCancel:hover {
  background: #dee2e6;
}

.cv-datePickerConfirm {
  background: #0d6efd;
  color: white;
}

.cv-datePickerConfirm:hover {
  background: #0b5ed7;
}

.cv-datePickerConfirm:disabled {
  background: #adb5bd;
  cursor: not-allowed;
}

/* Event Form Overlay */
.cv-formOverlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-overlay);
}

.cv-formBox {
  background: white;
  border-radius: 8px;
  padding: 24px;
  max-width: 680px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

.cv-formTitle {
  margin: 0 0 20px 0;
  font-size: 1.5rem;
  font-weight: 600;
  color: #1a1a1a;
}

.cv-form {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.cv-formGroup {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.cv-formRow {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.cv-formLabel {
  font-weight: 500;
  font-size: 0.9rem;
  color: #333;
}

.cv-formInput,
.cv-formSelect {
  padding: 10px 12px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 1rem;
  font-family: inherit;
  transition: border-color 0.2s;
}

.cv-formInput:focus,
.cv-formSelect:focus {
  outline: none;
  border-color: #0066cc;
  box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
}

.cv-formCheckbox {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  user-select: none;
}

.cv-formCheckbox input[type="checkbox"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
}

.cv-weekdayPicker {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.cv-weekdayBtn {
  padding: 8px 16px;
  border: 2px solid #ddd;
  background: white;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s;
}

.cv-weekdayBtn:hover {
  border-color: #0066cc;
}

.cv-weekdayBtn.active {
  background: #0066cc;
  color: white;
  border-color: #0066cc;
}

.cv-formHint {
  color: #666;
  font-size: 0.85rem;
  margin-top: 4px;
}

.cv-formError {
  color: red;
  font-size: 0.85rem;
  margin-top: 4px;
}

.cv-formActions .cv-formHint {
  width: 100%;
  text-align: center;
}

.cv-formActions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  margin-top: 8px;
  padding-top: 16px;
  border-top: 1px solid #eee;
}

.cv-formBtn {
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.cv-formBtnCancel {
  background: #f5f5f5;
  color: #333;
}

.cv-formBtnCancel:hover {
  background: #e0e0e0;
}

.cv-formBtnSubmit {
  background: #0066cc;
  color: white;
}

.cv-formBtnSubmit:hover:not(:disabled) {
  background: #0052a3;
}

.cv-formBtnSubmit:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Create Button in Toolbar */
.cv-createBtn {
  height: 44px;
  padding: 8px 16px;
  border: 1px solid #dee2e6;
  border-radius: 6px;
  background: white;
  color: #495057;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  display: flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
}

.cv-createBtn:hover {
  background: #e9ecef;
  border-color: #adb5bd;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
  transform: translateY(-1px);
}

.cv-createBtn:active {
  transform: translateY(0);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  background: #e9ecef;
}

/* Event Cards */
.cv-event {
  padding: 12px;
  margin-bottom: 8px;
  min-height: 60px;
  border-radius: 4px;
  border-left: 4px solid;
  background: #f9f9f9;
  cursor: pointer;
  transition: all 0.2s, background-color 0.2s;
}

.cv-event:hover {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  background-color: #f0f0f0;
}

.cv-eventTitle {
  font-weight: 600;
  font-size: 0.9rem;
  color: #1a1a1a;
  margin-bottom: 2px;
}

.cv-eventSubtitle {
  font-size: 0.8rem;
  color: #666;
}

/* Event Status Indicators */
.cv-event-ok {
  border-left-width: 6px;
}

.cv-event-warn {
  border-left-width: 6px;
  background: #fff9e6 !important;
  border-left-color: #ffaa00 !important;
}

.cv-event-critical {
  border-left-width: 6px;
  background: #ffe6e6 !important;
  border-left-color: #cc0000 !important;
}

/* Event Details */
.cv-detailsContent {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin: 16px 0;
}

.cv-detailRow {
  display: flex;
  gap: 12px;
  padding: 8px 0;
  border-bottom: 1px solid #f0f0f0;
  align-items: center;
}

.cv-detailLabel {
  font-weight: 600;
  color: #666;
  min-width: 120px;
  flex-shrink: 0;
}

.cv-detailValue {
  color: #333;
  flex: 1;
}

.cv-detailValueLecture {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.cv-lectureSwatch {
  width: 16px;
  height: 16px;
  border-radius: 3px;
  border: 1px solid rgba(0, 0, 0, 0.1);
  flex-shrink: 0;
}

.cv-lectureName {
  line-height: 1.2;
}

/* Label row */
.cv-formLabelRow {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

/* Add button */
.cv-addBtn {
  background: none;
  border: 1px solid #d1d5db;
  padding: 4px 12px;
  border-radius: 6px;
  font-size: 12px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
}

.cv-addBtn:hover {
  background-color: #f3f4f6;
  color: #374151;
  border-color: #9ca3af;
}

/* Inline add section */
.cv-addSection {
  background: #f9fafb;
  padding: 12px;
  border-radius: 8px;
  margin-bottom: 12px;
  border: 1px solid #e5e7eb;
}

.cv-addSection input {
  margin-bottom: 8px;
}

/* Color picker */
.cv-colorPicker {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.cv-colorBtn {
  width: 32px;
  height: 32px;
  border-radius: 6px;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.2s;
}

.cv-colorBtn:hover {
  transform: scale(1.1);
  border-color: #000;
}

.cv-colorBtn.active {
  border-color: #000;
  border-width: 3px;
  transform: scale(1.15);
}

#todaysColumnHeader {
  background-color: #9f9f9f;
}

#todaysColumn {
  background-color: #b9b9b9;
}

/* Mobile: keep columns readable and avoid stacking */
@media (max-width: 700px) {
  .cv-header {
    grid-template-columns: 80px repeat(var(--cv-day-count), minmax(260px, 1fr));
  }
  .cv-grid {
    grid-template-columns: repeat(var(--cv-day-count), minmax(260px, 1fr));
  }
}

/* =========================================
   Hide event time when event is too narrow
   (overlapping events)
   ========================================= */

/* Enable width-based container queries */
.cv-timeline-event {
  container-type: inline-size;
}

/* If event card becomes narrow, hide the time */
@container (max-width: 140px) {
  .cv-timeline-event-time {
    display: none;
  }

  .cv-timeline-event-title {
    font-size: 16px;
    line-height: 1.15;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-align: center;
  }
}

/* Even narrower */
@container (max-width: 110px) {
  .cv-timeline-event-title {
    font-size: 14px;
  }
}
.cv-timeline-events {
  inset: 0 10px 0 10px;
}


